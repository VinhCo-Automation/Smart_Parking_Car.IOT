<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Firebase Realtime Database Demo</title>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js"></script>
</head>
<body>
  <h1>Firebase Realtime Database Demo</h1>
  <ul id="data-list"></ul>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDi1gTt2xyj8VRmKWN8EyaHsroazh--2jg",
      authDomain: "smart-parking-car-iot.firebaseapp.com",
      databaseURL: "https://smart-parking-car-iot-default-rtdb.firebaseio.com",
      projectId: "smart-parking-car-iot",
      storageBucket: "smart-parking-car-iot.firebasestorage.app",
      messagingSenderId: "603168335075",
      appId: "1:603168335075:web:ab5b3ad4712203a5a811d6",
      measurementId: "G-Q5D2KJN408"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database(app);

    // Hàm hiển thị dữ liệu
    function displayData(snapshot) {
      const dataList = document.getElementById('data-list');
      dataList.innerHTML = "";  // Xóa danh sách trước khi cập nhật dữ liệu mới

      // Lấy dữ liệu từ Firebase: ESP_Send -> python_send -> send_python
      const data = snapshot.val().ESP_Send.python_send.send_python;

      const humidity = data.Humidity;
      const temperature = data.Temperature;

      // Hiển thị dữ liệu lên giao diện
      const listItem = document.createElement('li');
      listItem.textContent = `Humidity: ${humidity}%, Temperature: ${temperature}°C`;
      dataList.appendChild(listItem);
    }

    // Lắng nghe sự thay đổi trong Realtime Database
    const dataRef = database.ref('ESP_Send'); // Trỏ tới `ESP_Send`
    dataRef.on('value', (snapshot) => {
      displayData(snapshot);
    });
  </script>
</body>
</html>
